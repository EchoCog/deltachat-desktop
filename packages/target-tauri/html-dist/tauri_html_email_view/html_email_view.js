"use strict";(()=>{var y=Object.defineProperty;var a=(e,t)=>y(e,"name",{value:t,configurable:!0});function r(e,t,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(e):n?n.value:t.get(e)}a(r,"__classPrivateFieldGet");function l(e,t,s,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,s):o?o.value=s:t.set(e,s),s}a(l,"__classPrivateFieldSet");var c,i,h,m,T,f="__TAURI_TO_IPC_KEY__";function k(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}a(k,"transformCallback");var p=class{static{a(this,"Channel")}constructor(t){c.set(this,void 0),i.set(this,0),h.set(this,[]),m.set(this,void 0),l(this,c,t||(()=>{}),"f"),this.id=k(s=>{let n=s.index;if("end"in s){n==r(this,i,"f")?this.cleanupCallback():l(this,m,n,"f");return}let o=s.message;if(n==r(this,i,"f")){for(r(this,c,"f").call(this,o),l(this,i,r(this,i,"f")+1,"f");r(this,i,"f")in r(this,h,"f");){let _=r(this,h,"f")[r(this,i,"f")];r(this,c,"f").call(this,_),delete r(this,h,"f")[r(this,i,"f")],l(this,i,r(this,i,"f")+1,"f")}r(this,i,"f")===r(this,m,"f")&&this.cleanupCallback()}else r(this,h,"f")[n]=o})}cleanupCallback(){Reflect.deleteProperty(window,`_${this.id}`)}set onmessage(t){l(this,c,t,"f")}get onmessage(){return r(this,c,"f")}[(c=new WeakMap,i=new WeakMap,h=new WeakMap,m=new WeakMap,f)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[f]()}};async function d(e,t={},s){return window.__TAURI_INTERNALS__.invoke(e,t,s)}a(d,"invoke");T=new WeakMap;var E=document.getElementById("subject"),b=document.getElementById("sender"),I=document.getElementById("receive-time"),u=document.getElementById("toggle_network"),v=document.getElementById("toggle_network_label"),g=document.getElementById("toggle_network_more_button"),w=!1;d("get_html_window_info").then(({subject:e,sender:t,receiveTime:s,toggleNetwork:n,networkButtonLabelText:o,blockedByProxy:_})=>{_&&(g.disabled=!0,u.disabled=!0),E.innerText=e,b.innerText=t,v.innerText=o,u.checked=w=n,I.innerText=s});u.onclick=e=>{e.preventDefault();let t=!w;d("html_email_set_load_remote_content",{loadRemoteContent:t}).then(()=>{u.checked=t,w=t})};g.onclick=e=>{d("html_email_open_menu")};window.updateTheme=async()=>{let e=await d("get_current_active_theme_address");e==="system"&&(window.matchMedia("(prefers-color-scheme: dark)").matches?e="dc:dark":e="dc:light");let[t,s]=await d("get_theme",{themeAddress:e}),n=window.document.getElementById("theme-vars");if(!n)throw new Error("#theme-vars element not found");n.innerText=s};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{console.debug("system theme changed:",{dark_theme:e.matches}),window.updateTheme()});window.updateTheme();})();
//# sourceMappingURL=html_email_view.js.map
